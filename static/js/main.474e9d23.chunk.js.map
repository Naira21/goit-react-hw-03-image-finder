{"version":3,"sources":["components/Searchbar.js","services/pixabay.js","components/ImageGalleryItem.js","components/Button.js","components/Loader.js","components/Modal.js","components/ImageGallery.js","App.js","index.js"],"names":["Searchbar","state","searchValue","handleSearchOnChange","e","setState","target","value","handleSearchSubmit","preventDefault","console","log","props","onSubmit","className","this","type","autoComplete","autoFocus","placeholder","onChange","Component","PixabayFetch","API_KEY","BASE_URL","_searchQuery","_page","perPage","imageType","imageOrient","a","axios","defaults","baseURL","searchQuery","page","url","get","result","data","hits","message","ImageGalleryItem","pictUrl","photographer","onClick","largImg","src","alt","Button","results","length","LoaderComponent","color","height","width","timeout","Modal","handleEscape","code","handleClose","currentTarget","window","addEventListener","removeEventListener","createPortal","largePic","document","getElementById","newPixabayFetch","ImageGallery","searchResults","showModal","status","handleClick","searchPhotos","then","prev","scrolling","catch","scrollTo","top","documentElement","scrollHeight","behavior","closeModal","openModal","dataset","source","prevProps","prevState","resetPage","map","picture","webformatURL","user","largeImageURL","id","alert","App","getSearchValue","ReactDOM","render","StrictMode"],"mappings":"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","file":"static/js/main.474e9d23.chunk.js","sourcesContent":["import { Component } from \"react\";\nimport \"./styles.css\";\n\nclass Searchbar extends Component {\n  state = {\n    searchValue: \"\",\n  };\n\n  handleSearchOnChange = (e) => {\n    this.setState({ searchValue: e.target.value });\n  };\n\n  handleSearchSubmit = (e) => {\n    e.preventDefault();\n    console.log(\"before fetch\", this.state.searchValue);\n    this.props.onSubmit(this.state.searchValue); //передает родителю значение\n    this.setState({ searchValue: \"\" }); //зачищаем инпут (+ передаем свойство value в инпут)\n  };\n\n  render() {\n    return (\n      <header className=\"Searchbar\">\n        <form className=\"SearchForm\" onSubmit={this.handleSearchSubmit}>\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            value={this.state.searchValue}\n            placeholder=\"Search images and photos\"\n            onChange={this.handleSearchOnChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","import axios from \"axios\";\n\n//OOP\nexport class PixabayFetch {\n  constructor(API_KEY, BASE_URL) {\n    this.BASE_URL = BASE_URL;\n    this.API_KEY = API_KEY;\n    this._searchQuery = \"\"; //имя свойства, с которым работает геттер и сеттер (их имена одинаковые), должно отличаться. Для этого используем паттерн — нижнее подчеркивание\n    this._page = 1;\n    this.perPage = 12;\n    this.imageType = \"photo\";\n    this.imageOrient = \"horizontal\";\n  }\n  //так как мы передаем пустое значение для searchQuery, то необходимо ввести для них геттер ии сеттер\n  get searchQuery() {\n    return this._searchQuery;\n  }\n  set searchQuery(value) {\n    return (this._searchQuery = value);\n  }\n\n  get page() {\n    return this._page;\n  }\n  set page(value) {\n    return (this._page += value);\n  }\n  resetPage() {\n    return (this._page = 1);\n  }\n\n  async searchPhotos() {\n    axios.defaults.baseURL = this.BASE_URL;\n    console.log(\"searchQ:\", this.searchQuery, \"page:\", this.page);\n    let url = `?q=${this.searchQuery}&page=${this.page}&key=${this.API_KEY}&image_type=${this.imageType}&orientation=${this.imageOrient}&per_page=${this.perPage}`;\n\n    try {\n      const result = await axios.get(url);\n      const data = result.data.hits;\n      return data;\n    } catch (err) {\n      return err.message;\n    }\n  }\n}\n","import \"./styles.css\";\nimport PropTypes from \"prop-types\";\n\nconst ImageGalleryItem = ({ pictUrl, photographer, onClick, largImg }) => {\n  return (\n    <li className=\"ImageGalleryItem\">\n      <img\n        src={pictUrl}\n        alt={photographer}\n        className=\"ImageGalleryItem-image\"\n        onClick={onClick}\n        data-source={largImg}\n      />\n    </li>\n  );\n};\n\nexport default ImageGalleryItem;\n\nImageGalleryItem.propTypes = {\n  pictUrl: PropTypes.string,\n  photographer: PropTypes.string,\n  onClick: PropTypes.func,\n};\n","import \"./styles.css\";\n\nexport default function Button({ onClick, results }) {\n  return (\n    results.length > 11 && (\n      <button type=\"button\" className=\"Button\" onClick={onClick}>\n        Load more\n      </button>\n    )\n  );\n}\n","import \"react-loader-spinner/dist/loader/css/react-spinner-loader.css\";\nimport { Component } from \"react\";\nimport Loader from \"react-loader-spinner\";\n\nexport default class LoaderComponent extends Component {\n  //other logic\n  render() {\n    return (\n      <Loader\n        type=\"Bars\"\n        color=\"#00BFFF\"\n        height={80}\n        width={80}\n        timeout={3000}\n      />\n    );\n  }\n}\n","import { Component } from \"react\";\nimport { createPortal } from \"react-dom\";\nimport \"./styles.css\";\n\nexport class Modal extends Component {\n  componentDidMount() {\n    window.addEventListener(\"keydown\", this.handleEscape);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this.handleEscape);\n  }\n\n  handleEscape = (e) => {\n    if (e.code === \"Escape\") {\n      this.props.onClick();\n    }\n  };\n\n  handleClose = (e) => {\n    if (e.currentTarget === e.target) {\n      this.props.onClick();\n    }\n  };\n\n  render() {\n    return createPortal(\n      <div className=\"Overlay\" onClick={this.handleClose}>\n        <div className=\"Modal\">\n          <img src={this.props.largePic} alt=\"\" />\n        </div>\n      </div>,\n      document.getElementById(\"modalRoot\")\n    );\n  }\n}\n","import \"./styles.css\";\nimport { Component } from \"react\";\nimport { PixabayFetch } from \"../services/pixabay\";\nimport ImageGalleryItem from \"./ImageGalleryItem\";\nimport Button from \"./Button\";\nimport LoaderComponent from \"./Loader\";\nimport { Modal } from \"./Modal\";\n\n//для запроса\nconst API_KEY = `23235889-ad2e782c3a775466fc04cd861`;\nconst BASE_URL = `https://pixabay.com/api/`;\nconst newPixabayFetch = new PixabayFetch(API_KEY, BASE_URL);\n\nexport class ImageGallery extends Component {\n  state = {\n    searchResults: [],\n    showModal: false,\n    status: \"init\",\n    largImg: \"\",\n  };\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.searchValue !== this.props.searchValue) {\n      console.log(`get fetch`);\n      this.setState({ status: \"pending\" });\n      newPixabayFetch.resetPage();\n      newPixabayFetch.searchQuery = this.props.searchValue; //так как мы обращаемся к сеттеру, то значение мы просто перезаписываем (а не вызываем)\n      newPixabayFetch\n        .searchPhotos() //сетим значение из searchValue, чтобы вызвать метод searchPhotos\n        .then((searchResults) => {\n          console.log(searchResults);\n          this.setState({ searchResults, status: \"success\" });\n          this.scrolling();\n        })\n        .catch(() => {\n          this.setState({ status: \"error\" });\n        });\n    }\n  }\n\n  handleClick = () => {\n    newPixabayFetch.page = 1;\n    console.log(\"page\", newPixabayFetch.page);\n    newPixabayFetch\n      .searchPhotos()\n      .then((searchResults) => {\n        this.setState((prev) => ({\n          searchResults: [...prev.searchResults, ...searchResults],\n          status: \"success\",\n        }));\n        this.scrolling();\n      })\n      .catch(() => {\n        this.setState({ status: \"error\" });\n      });\n  };\n\n  scrolling = () => {\n    window.scrollTo({\n      top: document.documentElement.scrollHeight,\n      behavior: \"smooth\",\n    });\n  };\n\n  closeModal = () => {\n    this.setState({ showModal: false });\n  };\n\n  openModal = (e) => {\n    this.setState({\n      showModal: true,\n      largImg: e.target.dataset.source,\n    });\n  };\n\n  render() {\n    const { searchResults, status, showModal } = this.state;\n    const { closeModal, handleClick, openModal } = this;\n    if (status === \"init\") {\n      return null;\n    }\n    if (status === \"pending\") {\n      return <LoaderComponent />;\n    }\n    if (status === \"success\") {\n      return (\n        <>\n          <ul className=\"ImageGallery\">\n            {searchResults.length > 0 &&\n              searchResults.map((picture) => {\n                return (\n                  <ImageGalleryItem\n                    key={picture.id}\n                    onClick={openModal}\n                    pictUrl={picture.webformatURL}\n                    photographer={picture.user}\n                    largImg={picture.largeImageURL}\n                  />\n                );\n              })}\n            {showModal && (\n              <Modal onClick={closeModal} largePic={this.state.largImg} />\n            )}\n          </ul>\n          <Button type=\"button\" onClick={handleClick} results={searchResults} />\n        </>\n      );\n    }\n    if (status === \"error\") {\n      if (searchResults.length === 0) {\n        return alert(\"Sorry, we have not find such word... Lets try again!\");\n      }\n    }\n  }\n}\n","import { Component } from \"react\";\nimport \"./App.css\";\nimport Searchbar from \"./components/Searchbar\";\nimport { ImageGallery } from \"./components/ImageGallery\";\n\nclass App extends Component {\n  state = {\n    searchValue: \"\",\n    page: 1,\n  };\n\n  getSearchValue = (searchValue) => this.setState({ searchValue });\n\n  render() {\n    const { getSearchValue } = this;\n    const { searchValue, page } = this.state;\n\n    return (\n      <div className=\"App\">\n        <Searchbar onSubmit={getSearchValue} />\n        <ImageGallery searchValue={searchValue} page={page} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}