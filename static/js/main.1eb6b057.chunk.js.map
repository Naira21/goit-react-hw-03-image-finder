{"version":3,"sources":["components/Searchbar.js","services/pixabay.js","components/ImageGalleryItem.js","components/Button.js","components/ImageGallery.js","App.js","index.js"],"names":["Searchbar","state","searchValue","handleSearchOnChange","e","setState","target","value","handleSearchSubmit","preventDefault","console","log","props","onSubmit","className","this","type","autoComplete","autoFocus","placeholder","onChange","Component","PixabayFetch","API_KEY","BASE_URL","_searchQuery","_page","perPage","imageType","imageOrient","a","axios","defaults","baseURL","searchQuery","page","url","get","result","data","hits","message","ImageGalleryItem","picture","src","webformatURL","alt","user","Button","results","scrolling","window","scrollTo","top","document","documentElement","scrollHeight","behavior","length","onClick","newPixabayFetch","ImageGallery","searchResults","handleClick","prevProps","prevState","searchPhotos","then","map","id","App","getSearchValue","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.1eb6b057.chunk.js","sourcesContent":["import { Component } from \"react\";\nimport \"./styles.css\";\n\nclass Searchbar extends Component {\n  state = {\n    searchValue: \"\",\n  };\n\n  handleSearchOnChange = (e) => {\n    this.setState({ searchValue: e.target.value });\n  };\n\n  handleSearchSubmit = (e) => {\n    e.preventDefault();\n    console.log(\"before fetch\", this.state.searchValue);\n    this.props.onSubmit(this.state.searchValue); //передает родителю значение\n    this.setState({ searchValue: \"\" }); //зачищаем инпут (+ передаем свойство value в инпут)\n  };\n\n  render() {\n    return (\n      <header className=\"Searchbar\">\n        <form className=\"SearchForm\" onSubmit={this.handleSearchSubmit}>\n          <button type=\"submit\" className=\"SearchForm-button\">\n            <span className=\"SearchForm-button-label\">Search</span>\n          </button>\n          <input\n            className=\"SearchForm-input\"\n            type=\"text\"\n            autoComplete=\"off\"\n            autoFocus\n            value={this.state.searchValue}\n            placeholder=\"Search images and photos\"\n            onChange={this.handleSearchOnChange}\n          />\n        </form>\n      </header>\n    );\n  }\n}\n\nexport default Searchbar;\n","import axios from \"axios\";\n\n// const BASE_URL = `https://pixabay.com/api/`;\n// const API_KEY = `23235889-ad2e782c3a775466fc04cd861`;\n\n// axios.defaults.baseURL = BASE_URL;\n// axios.defaults.headers.common.key = API_KEY;\n// let searchQ = 'bear';\n// let searchP = '1';\n// let searchPP = '12';\n\n// let params = `?q=${searchQ}&page=${searchP}&per_page=${searchPP}`\n// let url = params;\n// axios.get(url);\n\n//OOP\nexport class PixabayFetch {\n  constructor(API_KEY, BASE_URL) {\n    this.BASE_URL = BASE_URL;\n    this.API_KEY = API_KEY;\n    this._searchQuery = \"\"; //имя свойства, с которым работает геттер и сеттер (их имена одинаковые), должно отличаться. Для этого используем паттерн — нижнее подчеркивание\n    this._page = 1;\n    this.perPage = 12;\n    this.imageType = \"photo\";\n    this.imageOrient = \"horizontal\";\n  }\n  //так как мы передаем пустое значение для searchQuery, то необходимо ввести для них геттер ии сеттер\n  get searchQuery() {\n    return this._searchQuery;\n  }\n  set searchQuery(value) {\n    return (this._searchQuery = value);\n  }\n\n  get page() {\n    return this._page;\n  }\n  set page(value) {\n    return (this._page = +value);\n  }\n\n  async searchPhotos() {\n    axios.defaults.baseURL = this.BASE_URL;\n    console.log(\"searchQ:\", this.searchQuery, \"page:\", this.page);\n    let url = `?q=${this.searchQuery}&page=${this.page}&key=${this.API_KEY}&image_type=${this.imageType}&orientation=${this.imageOrient}&per_page=${this.perPage}`;\n\n    try {\n      const result = await axios.get(url);\n      const data = result.data.hits;\n      return data;\n    } catch (err) {\n      return err.message;\n    }\n    // return\n    //     .then(result=> { return result.data })\n    //     .then(data => { return data.hits })\n    //     .catch((err) => { console.log(err) });\n  }\n}\n\n//Declarative method\n// export function PixabayFetchFunc(){\n// const BASE_URL = `https://pixabay.com/api/`;\n// const API_KEY = `23235889-ad2e782c3a775466fc04cd861`;\n\n//     axios.defaults.baseURL = BASE_URL;\n//     const searchPhotos=(searchQuery, searchPage, imageType, imageOrient, searchPerPage)=> {\n//         axios.defaults.baseURL = this.BASE_URL;\n//         let url = `?q=${searchQuery}&page=${searchPage}&key=${API_KEY}&image_type=${imageType}&orientation=${imageOrient}&per_page=${searchPerPage}`;\n//         axios.get(url).then((result)=>{console.log(result)}).catch((err)=>{console.log(err)});\n//     }\n// }\n","import \"./styles.css\";\n\nconst ImageGalleryItem = ({ picture }) => {\n  return (\n    <li className=\"ImageGalleryItem\">\n      <img\n        src={picture.webformatURL}\n        alt={picture.user}\n        className=\"ImageGalleryItem-image\"\n      />\n    </li>\n  );\n};\nexport default ImageGalleryItem;\n","import \"./styles.css\";\n\nexport default function Button({ results }) {\n  const scrolling = window.scrollTo({\n    top: document.documentElement.scrollHeight,\n    behavior: \"smooth\",\n  });\n  return (\n    results.length > 0 && (\n      <button type=\"button\" onClick={scrolling} className=\"Button\">\n        Load more\n      </button>\n    )\n  );\n}\n","import \"./styles.css\";\nimport { Component } from \"react\";\nimport { PixabayFetch } from \"../services/pixabay\";\nimport ImageGalleryItem from \"./ImageGalleryItem\";\nimport Button from \"./Button\";\n\n//для запроса\nconst API_KEY = `23235889-ad2e782c3a775466fc04cd861`;\nconst BASE_URL = `https://pixabay.com/api/`;\nconst newPixabayFetch = new PixabayFetch(API_KEY, BASE_URL);\n\nexport class ImageGallery extends Component {\n  state = {\n    searchResults: [],\n  };\n  componentDidUpdate(prevProps, prevState) {\n    if (prevProps.searchValue !== this.props.searchValue) {\n      console.log(`get fetch`);\n      newPixabayFetch.searchQuery = this.props.searchValue; //так как мы обращаемся к сеттеру, то значение мы просто перезаписываем (а не вызываем)\n      newPixabayFetch\n        .searchPhotos() //сетим значение из searchValue, чтобы вызвать метод searchPhotos\n        .then((searchResults) => {\n          console.log(searchResults);\n          this.setState({ searchResults });\n        });\n    }\n  }\n  handleClick = () => {\n    newPixabayFetch.page = 1;\n  };\n\n  render() {\n    return (\n      <>\n        <ul className=\"ImageGallery\">\n          {this.state.searchResults.length > 0 &&\n            this.state.searchResults.map((picture) => {\n              return <ImageGalleryItem picture={picture} key={picture.id} />;\n            })}\n        </ul>\n        <Button results={this.state.searchResults} />\n      </>\n    );\n  }\n}\n","import { Component } from \"react\";\nimport \"./App.css\";\n// import axios from \"axios\";\n// const BASE_URL = `https://pixabay.com/api/`;\n\n//импорт компонентов\nimport Searchbar from \"./components/Searchbar\";\nimport { ImageGallery } from \"./components/ImageGallery\";\n\n// let searchQuery = 'bear';\n// let searchPage = '1';\n// let searchPerPage = '12';\n// const imageType = 'photo';\n// const imageOrient = 'horizontal';\n// let url = `?q=${searchQuery}&page=${searchPage}&key=${API_KEY}&image_type=${imageType}&orientation=${imageOrient}&per_page=${searchPerPage}`\n\n//класс\n\nclass App extends Component {\n  state = {\n    searchValue: \"\",\n    page: 1,\n    //searchResults:[],\n  };\n\n  //методы жизненного цикла\n\n  componentDidUpdate(prevProps, prevState) {\n    // if (prevState.searchValue !== this.state.searchValue) {  //проверяем условие\n    //  console.log(`dd`)\n    // }\n  }\n  getSearchValue = (searchValue) => this.setState({ searchValue });\n  render() {\n    //const { handleSearchSubmit, handleSearchOnChange } = this;\n    const { searchValue, page } = this.state;\n\n    return (\n      <div className=\"App\">\n        <Searchbar onSubmit={this.getSearchValue} />\n        <ImageGallery searchValue={searchValue} page={page} />\n      </div>\n    );\n  }\n}\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport \"./index.css\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}